
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://loxilb-io.github.io/loxilbdocs/main/loxilb-incluster-grafana/">
      
      
      
      
      <link rel="icon" href="../photos/loxilb-logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>LoxiLB Network Visibility Tool Documentation - LoxiLB</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#loxilb-network-visibility-tool-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://www.loxilb.io/" title="LoxiLB" class="md-header__button md-logo" aria-label="LoxiLB" data-md-component="logo">
      
  <img src="../photos/loxilb-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LoxiLB
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              LoxiLB Network Visibility Tool Documentation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/loxilb-io/loxilb" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    loxilb-io/loxilb
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://www.loxilb.io/" title="LoxiLB" class="md-nav__button md-logo" aria-label="LoxiLB" data-md-component="logo">
      
  <img src="../photos/loxilb-logo.png" alt="logo">

    </a>
    LoxiLB
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/loxilb-io/loxilb" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    loxilb-io/loxilb
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Architectural Considerations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Architectural Considerations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kube-loxilb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Understanding loxilb deployment in K8s with kube-loxilb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ha-deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Understanding High-availability with loxilb
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    External Cluster Mode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            External Cluster Mode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k8s-flannel-ext/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K8s/loxilb external mode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k3s_quick_start_flannel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K3s/loxilb with default flannel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k3s_quick_start_calico/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K3s/loxilb with calico
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quick_start_with_cilium/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K3s/loxilb with cilium
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k0s_quick_start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K0s/loxilb with kube-router
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../eks-external/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EKS/loxilb external mode
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    In-Cluster Mode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            In-Cluster Mode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k8s-flannel-incluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K8s/loxilb in-cluster mode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cilium-incluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K8s/loxilb in-cluster & Cilium
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k3s_quick_start_incluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K3s/loxilb in-cluster mode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k0s_quick_start_incluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K0s/loxilb in-cluster mode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../microk8s_quick_start_incluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MicroK8s/loxilb in-cluster mode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../eks-incluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EKS/loxilb in-cluster mode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rhocp-quickstart-incluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RedHat OCP/loxilb in-cluster mode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calico-incluster-multus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K8s/loxilb in-cluster with calico & multus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Service-Proxy Mode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Service-Proxy Mode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service-proxy-flannel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    loxilb service-proxy plugin with flannel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service-proxy-calico/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    loxilb service-proxy plugin with calico
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Kubernetes Ingress Mode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes Ingress Mode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loxilb-ingress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k3s/Run loxilb-ingress
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Kubernetes Egress Mode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes Egress Mode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loxilb-egress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run loxilb as Kubernetes Egress
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../standalone/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Standalone Mode
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Advanced Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Advanced Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service-zones/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To - service-group zones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ext-ep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To - access end-points outside K8s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k3s-multi-master/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To - Deploy multi-server K3s HA with loxilb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-multi-az/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To - Deploy loxilb with multi-AZ HA support in AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multi-cloud-ha/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To - Deploy loxilb with multi-cloud HA support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loxilb-nginx-ingress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To - Deploy loxilb with ingress-nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loxilb-incluster-multus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To - Deploy loxilb in-cluster for multus based secondary services
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k3k-virtual-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To - Kubernetes virtual cluster setup with k3k and loxilb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service-sharding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To - Kubernetes service sharding with loxilb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gw-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To - loxilb L4/L7 policies with Kubernetes gateway API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../proxy-protocol-v2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To - Use proxy protocol v2 with loxilb
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Knowledge Base
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Knowledge Base
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ebpf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What is eBPF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What is k8s service - load-balancer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture in brief
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code organization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loxilbebpf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eBPF internals
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NAT Modes of loxilb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lb-algo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    loxilb load-balancer algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manual steps to build/run
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging loxilb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd-dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer's guide to loxicmd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer's guide to loxilb API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../https/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPS guide for loxilb APi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../oauth2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OAuth2 guide for loxilb API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    loxilb api-reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../perf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance Report
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development Roadmap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribution Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Requirements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frequenctly Asked Questions- FAQs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blogs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Blogs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.loxilb.io/post/build-a-high-performance-eks-cluster-using-auto-scaled-loxilb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EKS Cluster with in-cluster auto-scaled LoxiLB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.loxilb.io/post/loxilb-cluster-networking-elevating-k8s-networking-capabilities" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K8s - Elevating Cluster Networking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.loxilb.io/post/state-synchronization-of-ebpf-maps-using-go-a-tale-of-two-frameworks" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eBPF - Map Sync using Go
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.loxilb.io/post/k8s-nuances-of-in-cluster-external-service-lb-with-loxilb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K8s in-cluster service LB with LoxiLB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.loxilb.io/post/k8s-introducing-sctp-multihoming-functionality-with-loxilb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K8s - Introducing SCTP Multihoming with LoxiLB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.loxilb.io/post/loxilb-anycast-service-load-balancing-with-high-availability" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hyperscale anycast load balancing with HA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.loxilb.io/post/loxilb-load-balancer-setup-on-eks" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started with LoxiLB on Amazon EKS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.loxilb.io/post/k8s-deploying-hitless-and-ha-load-balancing" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K8s - Deploying hitless Load-Balancing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.loxilb.io/post/k8s-exposing-ipv4-services-externally-as-ipv6" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ipv6 migration in Kubernetes made easy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.loxilb.io/post/running-loxilb-on-aws-graviton2-based-ec2-instance" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load-balancer Perf comparison on Amazon Graviton2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.loxilb.io/post/ngap-load-balancing-with-loxilb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NGAP load balancing with LoxiLB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_12" >
        
          
          <label class="md-nav__link" for="__nav_6_12" id="__nav_6_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Community Posts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_12">
            <span class="md-nav__icon md-icon"></span>
            Community Posts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://dev.to/nikhilmalik/5g-service-communication-proxy-with-loxilb-4242" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5G Service Communication Proxy(SCP) with LoxiLB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://futuredon.medium.com/5g-sctp-loadbalancer-using-loxilb-b525198a9103" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5G SCTP LoadBalancer Using LoxiLB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://futuredon.medium.com/5g-uplink-classifier-using-loxilb-7593a4d66f4c" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5G Uplink Classifier Using LoxiLB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://cloudybytes.medium.com/k3s-using-loxilb-as-external-service-lb-2ea4ce61e159" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K3s - Using LoxiLB as external service lb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://medium.com/@ben0978327139/5g-sctp-loadbalancer-using-loxilb-applying-on-free5gc-b5c05bb723f0" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5G SCTP LoadBalancer Using LoxiLB Applying on free5GC
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loxilb-collector" class="md-nav__link">
    <span class="md-ellipsis">
      LoxiLB Collector
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LoxiLB Collector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prometheus-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Prometheus Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prometheus Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-connection-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      1. Connection Metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-traffic-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      2. Traffic Metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-request-and-error-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      3. Request and Error Metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-health-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      4. Health Metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-load-balancer-rule-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      5. Load Balancer Rule Metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-firewall-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      6. Firewall Metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-traffic-distribution-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      7. Traffic Distribution Metrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loxilb-visibility-tool-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      LoxiLB Visibility Tool Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LoxiLB Visibility Tool Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loxilb" class="md-nav__link">
    <span class="md-ellipsis">
      LoxiLB:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prometheus" class="md-nav__link">
    <span class="md-ellipsis">
      Prometheus:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loki-promtail" class="md-nav__link">
    <span class="md-ellipsis">
      Loki + Promtail:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#namespace-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Namespace Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loxilb-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      LoxiLB Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kube-loxilb-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Kube-LoxiLB Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prometheus-and-loki-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Prometheus and Loki Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-dashboard-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana Dashboard Setup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-details" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loxilb-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      LoxiLB Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prometheus-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Prometheus Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-credentials-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana Credentials Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grafana-dashboards" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana Dashboards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Grafana Dashboards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#home-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      Home Dashboard
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Home Dashboard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#traffic-throughput-requests-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Traffic Throughput &amp; Requests Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Traffic Throughput & Requests Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#panels" class="md-nav__link">
    <span class="md-ellipsis">
      Panels:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-flow-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Connection &amp; Flow Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connection & Flow Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#panels_1" class="md-nav__link">
    <span class="md-ellipsis">
      Panels:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traffic-distribution-by-endpoints-services" class="md-nav__link">
    <span class="md-ellipsis">
      Traffic Distribution by Endpoints &amp; Services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Traffic Distribution by Endpoints & Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#panels_2" class="md-nav__link">
    <span class="md-ellipsis">
      Panels:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-balancer-health-session-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Load Balancer Health &amp; Session Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Load Balancer Health & Session Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#panels_3" class="md-nav__link">
    <span class="md-ellipsis">
      Panels:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      Network Dashboard
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Network Dashboard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network-table-information" class="md-nav__link">
    <span class="md-ellipsis">
      Network Table information
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Network Table information">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#panels_4" class="md-nav__link">
    <span class="md-ellipsis">
      Panels:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Tables:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loxilb-traffic-management-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      LoxiLB Traffic Management Dashboard
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LoxiLB Traffic Management Dashboard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loxilb-configuration-monitoring-information" class="md-nav__link">
    <span class="md-ellipsis">
      LoxiLB Configuration &amp; Monitoring information
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LoxiLB Configuration & Monitoring information">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#panels_5" class="md-nav__link">
    <span class="md-ellipsis">
      Panels:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="loxilb-network-visibility-tool-documentation">LoxiLB Network Visibility Tool Documentation</h1>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#loxilb-collector">LoxiLB Collector</a></li>
<li><a href="#purpose">Purpose</a></li>
<li><a href="#prometheus-metrics">Prometheus Metrics</a></li>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#deployment-guide">Deployment Guide</a></li>
<li><a href="#namespace-setup">Namespace Setup</a></li>
<li><a href="#loxilb-deployment">LoxiLB Deployment</a></li>
<li><a href="#kube-loxilb-deployment">Kube-LoxiLB Deployment</a></li>
<li><a href="#prometheus-and-loki-setup">Prometheus and Loki Setup</a></li>
<li><a href="#grafana-dashboard-setup">Grafana Dashboard Setup</a></li>
<li><a href="#configuration-details">Configuration Details</a></li>
<li><a href="#loxilb-configuration">LoxiLB Configuration</a></li>
<li><a href="#prometheus-configuration">Prometheus Configuration</a></li>
<li><a href="#grafana-configuration">Grafana Configuration</a></li>
<li><a href="#grafana-dashboards">Grafana Dashboards</a></li>
<li><a href="#home-dashboard">Home Dashboard</a></li>
<li><a href="#network-dashboard">Network Dashboard</a></li>
<li><a href="#loxilb-traffic-management-dashboard">LoxiLB Traffic Management Dashboard</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>LoxiLB's Network Visibility Tool provides comprehensive observability for load balancing traffic using Prometheus for metrics collection and Grafana for visualization. This guide details the deployment and configuration steps to set up LoxiLB, Prometheus, Loki, and Grafana.</p>
<h2 id="loxilb-collector">LoxiLB Collector</h2>
<h3 id="purpose">Purpose</h3>
<p>LoxiLB supports exporting flow metrics with LoxiLB Kubernetes LoadBalancer service information and sending them to a LoxiLB Prometheus collector. This allows for in-depth monitoring and visibility into LoxiLB's performance and traffic handling.</p>
<h3 id="prometheus-metrics">Prometheus Metrics</h3>
<p>LoxiLB exposes various Prometheus metrics categorized as follows:</p>
<h4 id="1-connection-metrics">1. Connection Metrics</h4>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>active_conntrack_count</code></td>
<td>Gauge</td>
<td>The number of active established connections.</td>
</tr>
<tr>
<td><code>active_flow_count_tcp</code></td>
<td>Gauge</td>
<td>The number of concurrent TCP flows.</td>
</tr>
<tr>
<td><code>active_flow_count_udp</code></td>
<td>Gauge</td>
<td>The number of concurrent UDP flows.</td>
</tr>
<tr>
<td><code>active_flow_count_sctp</code></td>
<td>Gauge</td>
<td>The number of concurrent SCTP flows.</td>
</tr>
<tr>
<td><code>inactive_flow_count</code></td>
<td>Gauge</td>
<td>The number of closed connections.</td>
</tr>
<tr>
<td><code>new_flow_count</code></td>
<td>Gauge</td>
<td>The number of new connections.</td>
</tr>
</tbody>
</table>
<h4 id="2-traffic-metrics">2. Traffic Metrics</h4>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>processed_bytes</code></td>
<td>Counter</td>
<td>Total bytes processed.</td>
</tr>
<tr>
<td><code>processed_tcp_bytes</code></td>
<td>Counter</td>
<td>Total TCP bytes processed.</td>
</tr>
<tr>
<td><code>processed_udp_bytes</code></td>
<td>Counter</td>
<td>Total UDP bytes processed.</td>
</tr>
<tr>
<td><code>processed_sctp_bytes</code></td>
<td>Counter</td>
<td>Total SCTP bytes processed.</td>
</tr>
<tr>
<td><code>processed_packets</code></td>
<td>Counter</td>
<td>Total packets processed.</td>
</tr>
</tbody>
</table>
<h4 id="3-request-and-error-metrics">3. Request and Error Metrics</h4>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>total_requests</code></td>
<td>Counter</td>
<td>Total number of requests processed.</td>
</tr>
<tr>
<td><code>total_errors</code></td>
<td>Counter</td>
<td>Total number of errors encountered.</td>
</tr>
<tr>
<td><code>total_requests_per_service</code></td>
<td>CounterVec</td>
<td>Requests per service.</td>
</tr>
<tr>
<td><code>total_errors_per_service</code></td>
<td>CounterVec</td>
<td>Errors per service.</td>
</tr>
</tbody>
</table>
<h4 id="4-health-metrics">4. Health Metrics</h4>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>healthy_host_count</code></td>
<td>Gauge</td>
<td>Number of healthy backend endpoints.</td>
</tr>
<tr>
<td><code>unhealthy_host_count</code></td>
<td>Gauge</td>
<td>Number of unhealthy backend endpoints.</td>
</tr>
</tbody>
</table>
<h4 id="5-load-balancer-rule-metrics">5. Load Balancer Rule Metrics</h4>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lb_rule_count</code></td>
<td>Gauge</td>
<td>Total number of load balancing rules.</td>
</tr>
<tr>
<td><code>consumed_lcus</code></td>
<td>Gauge</td>
<td>Number of Load Balancer Capacity Units (LCUs) used.</td>
</tr>
</tbody>
</table>
<h4 id="6-firewall-metrics">6. Firewall Metrics</h4>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>total_fw_drops</code></td>
<td>Gauge</td>
<td>Number of packets dropped by the firewall.</td>
</tr>
<tr>
<td><code>total_fw_drops_per_rule</code></td>
<td>GaugeVec</td>
<td>Packets dropped per firewall rule.</td>
</tr>
</tbody>
</table>
<h4 id="7-traffic-distribution-metrics">7. Traffic Distribution Metrics</h4>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>endpoint_load_dists_per_service</code></td>
<td>GaugeVec</td>
<td>Traffic distribution per service and endpoint.</td>
</tr>
<tr>
<td><code>total_load_dists_per_service</code></td>
<td>GaugeVec</td>
<td>Overall traffic distribution per service.</td>
</tr>
</tbody>
</table>
<h2 id="architecture">Architecture</h2>
<h3 id="loxilb-visibility-tool-architecture">LoxiLB Visibility Tool Architecture</h3>
<p>The LoxiLB Network Visibility tool integrates <strong>Prometheus, Loki, and Grafana</strong> to provide comprehensive monitoring and logging for load balancing operations. The key components of this architecture are:</p>
<h4 id="loxilb">LoxiLB:</h4>
<ul>
<li>The core load balancer exporting metrics and logs.</li>
<li>Exposes:</li>
<li><strong>Prometheus Export APIs</strong> for real-time metric collection.</li>
<li><strong>Promtail</strong> for forwarding logs to Loki.</li>
<li><strong>REST API</strong> for additional visibility through Grafana’s <strong>Infinity Plugin</strong>.</li>
</ul>
<h4 id="prometheus">Prometheus:</h4>
<ul>
<li>Scrapes <strong>LoxiLB Export APIs</strong> to collect key metrics like connection status, traffic distribution, and error rates.</li>
<li>Metrics are stored and made available for visualization in <strong>Grafana</strong> through the <strong>Prometheus Plugin</strong>.</li>
</ul>
<h4 id="loki-promtail">Loki + Promtail:</h4>
<ul>
<li><strong>Promtail</strong> collects logs from LoxiLB and pushes them to <strong>Loki</strong>.</li>
<li><strong>Loki</strong> provides scalable log storage and indexing.</li>
<li>Logs are visualized in <strong>Grafana</strong> through the <strong>Loki Plugin</strong>.</li>
</ul>
<h4 id="grafana">Grafana:</h4>
<ul>
<li>The centralized visualization layer.</li>
<li>Integrates three primary data sources:</li>
<li><strong>Prometheus Plugin</strong> for metrics.</li>
<li><strong>Loki Plugin</strong> for logs.</li>
<li><strong>Infinity Plugin</strong> for REST API-based insights.</li>
</ul>
<p>This architecture ensures real-time visibility into LoxiLB's performance, allowing operators to monitor network traffic, troubleshoot failures, and analyze logs efficiently.</p>
<h2 id="deployment-guide">Deployment Guide</h2>
<h3 id="namespace-setup">Namespace Setup</h3>
<p>Create the monitoring namespace:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Namespace</span>
<span class="s">metadata:</span>
<span class="s">  name: monitoring</span>
<span class="s">EOF</span>
</code></pre></div>
<h3 id="loxilb-deployment">LoxiLB Deployment</h3>
<p>Deploy LoxiLB as a DaemonSet with Promtail for log forwarding:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/loxilb-io/kube-loxilb/blob/main/manifest/in-cluster-grafana/loxilb.yaml
</code></pre></div>
<h3 id="kube-loxilb-deployment">Kube-LoxiLB Deployment</h3>
<p>Deploy Kube-LoxiLB with the following command:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/loxilb-io/kube-loxilb/blob/main/manifest/in-cluster-grafana/kube-loxilb.yaml
</code></pre></div>
<h3 id="prometheus-and-loki-setup">Prometheus and Loki Setup</h3>
<p>Deploy Prometheus and Loki:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>loxilb-collector.yaml
</code></pre></div>
<h3 id="grafana-dashboard-setup">Grafana Dashboard Setup</h3>
<p>Deploy Grafana and configure it to use Prometheus and Loki as data sources:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>loxilb-grafana.yaml
</code></pre></div>
<p>Run the following command to check if ClickHouse and Grafana are deployed properly:
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>all<span class="w"> </span>-n<span class="w"> </span>monitoring
</code></pre></div></p>
<p>The expected results will be like:</p>
<div class="highlight"><pre><span></span><code>NAME<span class="w">                               </span>READY<span class="w">   </span>STATUS<span class="w">    </span>RESTARTS<span class="w">   </span>AGE
pod/grafana-llb-674d977bcd-tg48p<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>53m
pod/loki-84889c745c-bmppk<span class="w">          </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>8d
pod/prometheus-54958dc4c8-l72t7<span class="w">    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>8d

NAME<span class="w">                     </span>TYPE<span class="w">           </span>CLUSTER-IP<span class="w">      </span>EXTERNAL-IP<span class="w">         </span>PORT<span class="o">(</span>S<span class="o">)</span><span class="w">           </span>AGE
service/grafana-llb<span class="w">      </span>LoadBalancer<span class="w">   </span><span class="m">10</span>.233.39.107<span class="w">   </span>llb-192.168.0.251<span class="w">   </span><span class="m">59301</span>:30115/TCP<span class="w">   </span>53m
service/grafana-svc<span class="w">      </span>ClusterIP<span class="w">      </span><span class="m">10</span>.233.39.130<span class="w">   </span>&lt;none&gt;<span class="w">              </span><span class="m">3000</span>/TCP<span class="w">          </span>53m
service/loki<span class="w">             </span>ClusterIP<span class="w">      </span><span class="m">10</span>.233.51.93<span class="w">    </span>&lt;none&gt;<span class="w">              </span><span class="m">3100</span>/TCP<span class="w">          </span>8d
service/loki-llb<span class="w">         </span>LoadBalancer<span class="w">   </span><span class="m">10</span>.233.20.171<span class="w">   </span>llb-192.168.0.251<span class="w">   </span><span class="m">59302</span>:32475/TCP<span class="w">   </span>8d
service/prometheus<span class="w">       </span>ClusterIP<span class="w">      </span><span class="m">10</span>.233.10.55<span class="w">    </span>&lt;none&gt;<span class="w">              </span><span class="m">9090</span>/TCP<span class="w">          </span>8d
service/prometheus-llb<span class="w">   </span>LoadBalancer<span class="w">   </span><span class="m">10</span>.233.2.91<span class="w">     </span>llb-192.168.0.251<span class="w">   </span><span class="m">59303</span>:30893/TCP<span class="w">   </span>8d

NAME<span class="w">                          </span>READY<span class="w">   </span>UP-TO-DATE<span class="w">   </span>AVAILABLE<span class="w">   </span>AGE
deployment.apps/grafana-llb<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>53m
deployment.apps/loki<span class="w">          </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>8d
deployment.apps/prometheus<span class="w">    </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>8d

NAME<span class="w">                                     </span>DESIRED<span class="w">   </span>CURRENT<span class="w">   </span>READY<span class="w">   </span>AGE
replicaset.apps/grafana-llb-674d977bcd<span class="w">   </span><span class="m">1</span><span class="w">         </span><span class="m">1</span><span class="w">         </span><span class="m">1</span><span class="w">       </span>53m
replicaset.apps/loki-84889c745c<span class="w">          </span><span class="m">1</span><span class="w">         </span><span class="m">1</span><span class="w">         </span><span class="m">1</span><span class="w">       </span>8d
replicaset.apps/prometheus-54958dc4c8<span class="w">    </span><span class="m">1</span><span class="w">         </span><span class="m">1</span><span class="w">         </span><span class="m">1</span><span class="w">       </span>8d
</code></pre></div>
<p>Run the following commands to print the IP of the workder Node and the Port
that Grafana is listening on:</p>
<div class="highlight"><pre><span></span><code><span class="nv">GRAFANA_LB_IP</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>grafana-llb<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.status.loadBalancer.ingress[0].hostname}&#39;</span><span class="k">)</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$GRAFANA_LB_IP</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">GRAFANA_LB_IP</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>grafana-llb<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.status.loadBalancer.ingress[0].ip}&#39;</span><span class="k">)</span>
<span class="k">fi</span>

<span class="c1"># Get the LoadBalancer service port</span>
<span class="nv">GRAFANA_PORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>grafana-llb<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.spec.ports[0].port}&#39;</span><span class="k">)</span>

<span class="c1"># Check if GRAFANA_LB_IP is empty, fallback to NodePort access</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$GRAFANA_LB_IP</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;No external LoadBalancer IP found! Falling back to NodePort access.&quot;</span>

<span class="w">    </span><span class="c1"># Get the node where Grafana is running</span>
<span class="w">    </span><span class="nv">NODE_NAME</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>pod<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>grafana<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.items[0].spec.nodeName}&#39;</span><span class="k">)</span>
<span class="w">    </span><span class="nv">NODE_IP</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>nodes<span class="w"> </span><span class="si">${</span><span class="nv">NODE_NAME</span><span class="si">}</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.status.addresses[0].address}&#39;</span><span class="k">)</span>

<span class="w">    </span><span class="c1"># Get the NodePort assigned to Grafana</span>
<span class="w">    </span><span class="nv">GRAFANA_NODEPORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>grafana-llb<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.spec.ports[*].nodePort}&#39;</span><span class="k">)</span>

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;=== Grafana Service is accessible via NodePort at http://</span><span class="si">${</span><span class="nv">NODE_IP</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GRAFANA_NODEPORT</span><span class="si">}</span><span class="s2"> ===&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;You can now open the Grafana dashboard in the browser using:&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  http://</span><span class="si">${</span><span class="nv">NODE_IP</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GRAFANA_NODEPORT</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;=== Grafana Service is accessible at http://</span><span class="si">${</span><span class="nv">GRAFANA_LB_IP</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GRAFANA_PORT</span><span class="si">}</span><span class="s2"> ===&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;You can now open the Grafana dashboard in the browser using:&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  http://</span><span class="si">${</span><span class="nv">GRAFANA_LB_IP</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">GRAFANA_PORT</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">fi</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;You should be able to see the Grafana login page.&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Default login credentials:&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  Username: admin&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  Password: password&quot;</span>
</code></pre></div>
<p>You can now open the Grafana dashboard in the browser using <code>http://[NodeIP]:[GRAFANA_PORT]</code>.
You should be able to see a Grafana login page. Login credentials:</p>
<ul>
<li>username: admin</li>
<li>password: password</li>
</ul>
<h2 id="configuration-details">Configuration Details</h2>
<h3 id="loxilb-configuration">LoxiLB Configuration</h3>
<p>LoxiLB is configured to export metrics via Prometheus and logs via Loki. The configuration includes:
- <strong>Prometheus Exporter</strong>: Exposes metrics on <code>/netlox/v1/metrics</code>.
- <strong>Promtail Logging Integration</strong>: Forwards logs to Loki.
- <strong>Annotations for LoadBalancer Services</strong>: Enables integration with monitoring tools.</p>
<h3 id="prometheus-configuration">Prometheus Configuration</h3>
<p>Prometheus is configured to scrape metrics from LoxiLB using the following configuration:</p>
<div class="highlight"><pre><span></span><code><span class="nt">scrape_configs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;loxilb&#39;</span>
<span class="w">    </span><span class="nt">metrics_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/netlox/v1/metrics</span>
<span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;loxilb-lb-service.kube-system.svc.cluster.local:11111&#39;</span>
</code></pre></div>
<h3 id="grafana-configuration">Grafana Configuration</h3>
<p>Grafana is configured with Prometheus and Loki as data sources. The configuration includes:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">datasources</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prometheus</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prometheus</span>
<span class="w">    </span><span class="nt">access</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">proxy</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://prometheus:9090</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Loki</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">loki</span>
<span class="w">    </span><span class="nt">access</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">proxy</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://loki:3100</span>
</code></pre></div>
<h3 id="grafana-credentials-configuration">Grafana Credentials Configuration</h3>
<p>Grafana credentials are specified in <code>loxilb-grafana.yml</code> as a Secret
named <code>grafana-admin-secret</code> as shown below. Please also make the corresponding
changes.</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">grafana-admin-secret</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">monitoring</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">admin-password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cGFzc3dvcmQ=</span><span class="w">  </span><span class="c1"># Base64-encoded password (e.g., &#39;password&#39;)</span>
</code></pre></div>
<h2 id="grafana-dashboards">Grafana Dashboards</h2>
<h3 id="home-dashboard">Home Dashboard</h3>
<p>Home dashboard is the LoxiLB dashboard in the general folder. You will see it after logging into Grafana. It provides an overview of the monitored LoxiLB cluster.</p>
<h4 id="traffic-throughput-requests-metrics">Traffic Throughput &amp; Requests Metrics</h4>
<p><img alt="setup" src="../photos/loxilb-dashboard-1.png" /></p>
<p>This section displays the total traffic processed by LoxiLB across different protocols, along with request rate statistics.</p>
<h5 id="panels">Panels:</h5>
<ul>
<li><strong>TCP Throughput (BPS)</strong>: Tracks TCP traffic processed by LoxiLB in bytes per second.</li>
<li><strong>UDP Throughput (BPS)</strong>: Tracks UDP traffic processed by LoxiLB.</li>
<li><strong>SCTP Throughput (BPS)</strong>: Displays SCTP traffic throughput, useful in telecom and specialized workloads.</li>
<li><strong>Total Requests</strong>: Shows the request rate over time.</li>
<li><strong>Requests Per Service</strong>: Breaks down request volume per service, identifying load distribution across multiple services.</li>
</ul>
<h4 id="connection-flow-metrics">Connection &amp; Flow Metrics</h4>
<p>This section provides insights into active and new connections.</p>
<p><img alt="setup" src="../photos/loxilb-dashboard-3.png" /></p>
<h5 id="panels_1">Panels:</h5>
<ul>
<li><strong>New Flow Count</strong>: Displays the rate of new connections initiated.</li>
<li><strong>Active Flow Count (TCP, UDP, SCTP)</strong>: Monitors the number of ongoing TCP, UDP, and SCTP flows.</li>
<li><strong>Firewall Drops (Top 5 Rules)</strong>: Shows the top firewall rules that resulted in dropped packets.</li>
<li><strong>Total Firewall Drops</strong>: Summarizes all packet drops due to firewall rules.</li>
</ul>
<h4 id="traffic-distribution-by-endpoints-services">Traffic Distribution by Endpoints &amp; Services</h4>
<p>These panels analyze traffic distribution across services and endpoints.</p>
<p><img alt="setup" src="../photos/loxilb-dashboard-2.png" /></p>
<h5 id="panels_2">Panels:</h5>
<ul>
<li><strong>Top 5 Endpoints by Traffic</strong>: Displays the five backend endpoints handling the most traffic.</li>
<li><strong>Top 5 Endpoint Distribution (Pie Chart)</strong>: Graphical representation of traffic distribution among the top endpoints.</li>
<li><strong>Top 5 Services by Traffic</strong>: Shows which services are consuming the most bandwidth.</li>
<li><strong>Traffic Distribution by Service (Pie Chart)</strong>: Breaks down service-level traffic in a pie chart.</li>
</ul>
<h4 id="load-balancer-health-session-metrics">Load Balancer Health &amp; Session Metrics</h4>
<p>This section tracks the health of load balancer rules and active session counts.</p>
<p><img alt="setup" src="../photos/loxilb-dashboard-4.png" /></p>
<h5 id="panels_3">Panels:</h5>
<ul>
<li><strong>LB Rule Count</strong>: Shows the number of active load balancing rules.</li>
<li><strong>Healthy Endpoint Count</strong>: Displays the number of healthy backend services.</li>
<li><strong>Unhealthy Endpoint Count</strong>: Alerts when backend services become unhealthy.</li>
<li><strong>Active TCP, UDP, SCTP Session Count</strong>: Monitors active sessions for each protocol.</li>
<li><strong>Total Processed Traffic (BPS)</strong>: Measures the aggregate traffic handled by LoxiLB.</li>
<li><strong>Total Processed Packets (PPS)</strong>: Displays total packet processing rate.</li>
</ul>
<h3 id="network-dashboard">Network Dashboard</h3>
<p>The Network Dashboard provides a real-time overview of LoxiLB's network state, including interface statistics, ARP tables, routing information, and high availability (HA) status.</p>
<p><img alt="setup" src="../photos/loxilb-dashboard-network-1.png" /></p>
<p><img alt="setup" src="../photos/loxilb-dashboard-network-2.png" /></p>
<h4 id="network-table-information">Network Table information</h4>
<h5 id="panels_4">Panels:</h5>
<ul>
<li><strong>Number of Ports</strong>: Displays the total number of network ports managed by LoxiLB.</li>
<li><strong>Number of Interfaces</strong>: Shows the total network interfaces available.</li>
<li><strong>Number of ARP Tables</strong>: Indicates the count of ARP (Address Resolution Protocol) entries being tracked.</li>
<li><strong>Number of VLAN Tables</strong>: Displays the number of VLAN configurations present in the system.</li>
<li><strong>Number of BGP Neighbors</strong>: Shows the total count of configured BGP neighbors.</li>
<li><strong>Number of ACL Tables</strong>: Displays the total ACL (Access Control List) rules applied.</li>
</ul>
<h5 id="additional-tables">Additional Tables:</h5>
<ul>
<li><strong>ARP Table</strong>: Displays the real-time ARP cache, mapping IP addresses to MAC addresses.</li>
<li><strong>Route Table</strong>: Lists active routes, including destination addresses, route flags, and packet/byte counters.</li>
<li><strong>Port Table</strong>: Provides details on network interfaces, including MAC addresses, MTU settings, and port activity.</li>
<li><strong>HA State Table</strong>: Displays high availability status, indicating whether the LoxiLB instance is operating in MASTER or BACKUP mode.</li>
</ul>
<p>This dashboard is essential for network administrators to monitor LoxiLB’s network configuration and troubleshoot connectivity issues efficiently.</p>
<h3 id="loxilb-traffic-management-dashboard">LoxiLB Traffic Management Dashboard</h3>
<p>The LoxiLB Traffic Management Dashboard focuses on policies, load balancing rules, and endpoint monitoring. It provides insights into active LB policies, endpoint states, and high-availability configurations.</p>
<h4 id="loxilb-configuration-monitoring-information">LoxiLB Configuration &amp; Monitoring information</h4>
<h5 id="panels_5">Panels:</h5>
<ul>
<li><strong>Number of LB Policies</strong>: Displays the count of active load balancer policies.</li>
<li><strong>Number of LB Endpoints</strong>: Shows the total number of backend endpoints.</li>
<li><strong>Number of Healthy Endpoints</strong>: Displays the count of healthy endpoints.</li>
<li><strong>Number of Unhealthy Endpoints</strong>: Indicates any failed or unhealthy endpoints.</li>
<li><strong>Number of QoS Rules</strong>: Displays the number of QoS policies applied.</li>
<li>
<p><strong>Number of Mirror Rules</strong>: Shows the active mirroring policies.
<img alt="setup" src="../photos/loxilb-dashboard-llb-1.png" /></p>
</li>
<li>
<p><strong>HA State Table</strong>: Displays the High Availability (HA) status of LoxiLB instances.</p>
</li>
<li><strong>LB Configuration Parameters</strong>: Displays key configuration settings for LoxiLB.</li>
<li><strong>Traffic Pair Analysis</strong>: Shows the top traffic pairs between source and destination.</li>
<li><strong>Service Graph</strong>: A network graph representation of LoxiLB traffic distribution.
<img alt="setup" src="../photos/loxilb-dashboard-llb-2.png" /></li>
</ul>
<h2 id="troubleshooting">Troubleshooting</h2>
<ul>
<li>Ensure all pods in the <code>monitoring</code> namespace are running:</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>monitoring
</code></pre></div>
<ul>
<li>Check logs for Prometheus, Loki, and Grafana:</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>prometheus
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>loki
kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>grafana
</code></pre></div>
<ul>
<li>Validate service endpoints:</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>-n<span class="w"> </span>monitoring
</code></pre></div>
<ul>
<li>If Prometheus is not scraping metrics correctly, ensure that the target LoxiLB metrics endpoint is reachable:</li>
</ul>
<p>Run the following commands to print the IP of the workder Node and the Port
that Prometheus is listening on:</p>
<div class="highlight"><pre><span></span><code><span class="nv">PROMETHEUS_LB_IP</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>prometheus-llb<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.status.loadBalancer.ingress[0].hostname}&#39;</span><span class="k">)</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PROMETHEUS_LB_IP</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">PROMETHEUS_LB_IP</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>prometheus-llb<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.status.loadBalancer.ingress[0].ip}&#39;</span><span class="k">)</span>
<span class="k">fi</span>

<span class="c1"># Get the LoadBalancer service port</span>
<span class="nv">PROMETHEUS_PORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>prometheus-llb<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.spec.ports[0].port}&#39;</span><span class="k">)</span>

<span class="c1"># Check if PROMETHEUS_LB_IP is empty, fallback to NodePort access</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PROMETHEUS_LB_IP</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;No external LoadBalancer IP found! Falling back to NodePort access.&quot;</span>

<span class="w">    </span><span class="c1"># Get the node where Grafana is running</span>
<span class="w">    </span><span class="nv">NODE_NAME</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>pod<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>grafana<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.items[0].spec.nodeName}&#39;</span><span class="k">)</span>
<span class="w">    </span><span class="nv">NODE_IP</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>nodes<span class="w"> </span><span class="si">${</span><span class="nv">NODE_NAME</span><span class="si">}</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.status.addresses[0].address}&#39;</span><span class="k">)</span>

<span class="w">    </span><span class="c1"># Get the NodePort assigned to Grafana</span>
<span class="w">    </span><span class="nv">PROMETHEUS_NODEPORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>prometheus-llb<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.spec.ports[*].nodePort}&#39;</span><span class="k">)</span>

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;=== Grafana Service is accessible via NodePort at http://</span><span class="si">${</span><span class="nv">NODE_IP</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">PROMETHEUS_NODEPORT</span><span class="si">}</span><span class="s2"> ===&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;You can now open the Grafana dashboard in the browser using:&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  http://</span><span class="si">${</span><span class="nv">NODE_IP</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">PROMETHEUS_NODEPORT</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;=== Grafana Service is accessible at http://</span><span class="si">${</span><span class="nv">PROMETHEUS_LB_IP</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">PROMETHEUS_PORT</span><span class="si">}</span><span class="s2"> ===&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;You can now open the Grafana dashboard in the browser using:&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  http://</span><span class="si">${</span><span class="nv">PROMETHEUS_LB_IP</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">PROMETHEUS_PORT</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">fi</span>
</code></pre></div>
<p>You can now open the Prometheus dashboard in the browser using <code>http://[NodeIP]:[PROMETHEUS_PORT]</code>.</p>
<p>Then, visit <code>http://[NodeIP]:[PROMETHEUS_PORT]/targets</code> and verify that the LoxiLB metrics endpoint is listed and marked as <code>UP</code>.</p>
<ul>
<li>If Loki logs are missing in Grafana, check the log pipeline configuration and Promtail logs:</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>monitoring<span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>promtail
</code></pre></div>
<p>This document provides a comprehensive overview of the metrics exposed by LoxiLB. Use these metrics to monitor performance, identify issues, and optimize your load balancer configuration. For further assistance, consult the LoxiLB documentation or contact the NetLOX support team.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!-- Copyright and theme information -->
<div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2022 - 2024 LoxiLB Authors. The Linux Foundation® (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a href="https://www.linuxfoundation.org/legal/trademark-usage">Trademark Usage</a>
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/loxilb-io/loxilb" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/company/loxilb/" target="_blank" rel="noopener" title="LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.loxilb.io/" target="_blank" rel="noopener" title="Website" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.92 7.92 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8 8 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.7 15.7 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://join.slack.com/t/loxilb/shared_invite/zt-2b3xx14wg-P7WHj5C~OEON_jviF0ghcQ" target="_blank" rel="noopener" title="join.slack.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1s21.16-47.06 47.06-47.06h47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06S448 171 448 196.9s-21.16 47.06-47.06 47.06h-47.06zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06S309 480 283.1 480s-47.06-21.16-47.06-47.06v-47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06s21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.path", "navigation.instant", "navigation.tracking", "navigation.indexes", "navigation.top", "navigation.footer", "search.suggest"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>